<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.my.sendemail.dao.TimedTaskDaoI">
    <!--更新单条记录 可以获得插入的主键 -->
    <insert id="addOneTimedTask" parameterType="com.my.sendemail.po.TimedTaskPo" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
        INSERT INTO t_timedtask (id,name,group_name,start_time,end_time,cron,job_status,plan_status,opera_status,job_data,method_name,bean_name,description,create_user_id,create_date,modify_user_id,modify_date)
        VALUES (#{id},#{name},#{groupName},#{startTime},#{endTime},#{cron},#{jobStatus},#{planStatus},#{operaStatus},#{jobData},#{methodName},#{beanName},#{description},#{createUserId},#{createDate},#{modifyUserId},#{modifyDate});
    </insert>
    
    <!--查询nf_customer_ip表并返回结果集 -->
    <select id="listTimedTask" resultType="com.my.sendemail.po.TimedTaskPo" parameterType="com.my.sendemail.po.TimedTaskPo">
        SELECT * FROM t_timedtask <where>
        <if test=" null != id and '' != id">AND id = #{id}</if>
        <if test=" null != name and '' != name">AND name = #{name}</if>
        <if test=" null != groupName and '' != groupName">AND group_name = #{groupName}</if>
        <if test=" null != startTime and '' != startTime">AND start_time = #{startTime}</if>
        <if test=" null != endTime and '' != endTime">AND end_time = #{endTime}</if>
        <if test=" null != cron and '' != cron">AND cron = #{cron}</if>
        <if test=" null != jobStatus and '' != jobStatus">AND job_status = #{jobStatus}</if>
        <if test=" null != planStatus and '' != planStatus">AND plan_status = #{planStatus}</if>
        <if test=" null != operaStatus and '' != operaStatus">AND opera_status = #{operaStatus}</if>
        <if test=" null != jobData and '' != jobData">AND job_data = #{jobData}</if>
        <if test=" null != methodName and '' != methodName">AND method_name = #{methodName}</if>
        <if test=" null != beanName and '' != beanName">AND bean_name = #{beanName}</if>
        <if test=" null != description and '' != description">AND description = #{description}</if>
        <if test=" null != createUserId and '' != createUserId">AND create_user_id = #{createUserId}</if>
        <if test=" null != createDate and '' != createDate">AND create_date = #{createDate}</if>
        <if test=" null != modifyUserId and '' != modifyUserId">AND modify_user_id = #{modifyUserId}</if>
        <if test=" null != modifyDate and '' != modifyDate">AND modify_date = #{modifyDate}</if>
        </where>
    </select>
    
    <!-- 更新单条记录 不更新null 可以获得更新的条数-->
    <update id="updateOneTimedTask" parameterType="com.my.sendemail.po.TimedTaskPo">
        UPDATE t_timedtask <set>
        <if test=" null != name">name = #{name},</if>
        <if test=" null != groupName">group_name = #{groupName},</if>
        <if test=" null != startTime">start_time = #{startTime},</if>
        <if test=" null != endTime">end_time = #{endTime},</if>
        <if test=" null != cron">cron = #{cron},</if>
        <if test=" null != jobStatus">job_status = #{jobStatus},</if>
        <if test=" null != planStatus">plan_status = #{planStatus},</if>
        <if test=" null != operaStatus">opera_status = #{operaStatus},</if>
        <if test=" null != jobData">job_data = #{jobData},</if>
        <if test=" null != methodName">method_name = #{methodName},</if>
        <if test=" null != beanName">bean_name = #{beanName},</if>
        <if test=" null != description">description = #{description},</if>
        <if test=" null != createUserId">create_user_id = #{createUserId},</if>
        <if test=" null != createDate">create_date = #{createDate},</if>
        <if test=" null != modifyUserId">modify_user_id = #{modifyUserId},</if>
        <if test=" null != modifyDate">modify_date = #{modifyDate},</if>
        </set> where id IN (${id})
    </update>
    <!-- 更新单条记录 更新null 可以获得更新的条数-->
    <update id="updateOneTimedTaskHaveNull" parameterType="com.my.sendemail.po.TimedTaskPo">
        UPDATE t_timedtask <set>
        id = #{id},
        name = #{name},
        group_name = #{groupName},
        start_time = #{startTime},
        end_time = #{endTime},
        cron = #{cron},
        job_status = #{jobStatus},
        plan_status = #{planStatus},
        is_concurrent = #{isConcurrent},
        job_data = #{jobData},
        method_name = #{methodName},
        bean_name = #{beanName},
        description = #{description},
        create_user_id = #{createUserId},
        create_date = #{createDate},
        modify_user_id = #{modifyUserId},
        modify_date = #{modifyDate},
        </set> where id IN (${id})
    </update>
</mapper>